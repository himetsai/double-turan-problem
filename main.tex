\documentclass[12pt]{report}
\usepackage{amsmath, amssymb, amsthm}
\usepackage{geometry}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{enumitem}
\usepackage{titlesec}
\usepackage{setspace}
\usepackage{mathtools}
\usepackage{tikz}
\usepackage[colorinlistoftodos]{todonotes}
\titleformat{\chapter}[hang]{\normalfont\huge\bfseries}{\thechapter}{1em}{}
\usetikzlibrary{automata,positioning}

% Page layout
\geometry{a4paper, margin=1in}
\setlength{\parskip}{5pt}

% Theorem Environments
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lemma}{Lemma}[theorem]
\newtheorem{claim}{Claim}[theorem]
\newtheorem{conjecture}{Conjecture}[chapter]
\newtheorem{definition}[theorem]{Definition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}

% Title Page
\title{Double Turán Problem}
\author{Ray Tsai}
\date{November 2024}

\begin{document}

\maketitle

% \begin{abstract}
% Your abstract here. Provide a concise summary of your thesis, including the problem statement, methodology, main results, and conclusions.
% \end{abstract}

% \chapter*{Acknowledgments}
% Thank your advisor, collaborators, and anyone who supported your research.

\tableofcontents

\chapter{Introduction}

\section{Definitions and Notation}
Let $G = (V, E)$ be a graph. Let $V(G) = V$ denote the vertex set and $E(G) = E$ denote the edge set
of $G$. We note by $v(G) = |V|$ the number of vertices and $e(G) = |E|$ the number of edges in $G$.
For vertex $v \in V(G)$, we denote by $N_G(v) = \{u \in V(G) : \{u, v\} \in E(G)\}$ the neighborhood
of $v$.

Given $G_1, \ldots, G_m$ subgraphs of $G$, we denote $G_{i_1, \ldots, i_k}$ as the subgraph of $G$
with edge set $E(G_{i_1, \ldots, i_k}) = \bigcap_{\alpha = 1}^k E(G_{\alpha})$. 

In this thesis, we reserve $n$ to denote the number of vertices in a graph. Given a graph $F$, we
denote $\text{ex}(n, F)$ to be the extremal number for $F$ on a graph with $n$ vertices, i.e. the
maximum number of edges in a $n$-vertex graph that does not contain $F$ as a subgraph. We define the
Turán density of $F$ as
\[
  \pi(F) \coloneqq \lim_{n \to \infty} \frac{\text{ex}(n, F)}{\binom{n}{2}}.
\]

\section{Problem Statement}

Given graph $G$ with $n$ vertices, let $G_1, \ldots, G_m$ be subgraphs of $G$. Let $F$ be a graph
with at least one edge. Our goal is to determine the maximum sum of the number of edges over all
$G_i$'s, i.e. $\sum_{i = 1}^m e(G_i)$, with the constraint of $E(G_i) \cap E(G_j)$ not including
some graph $F$ for all distinct $i, j$. 

In this thesis, we mainly put our attention on the case where $F$ is non-bipartite. We will first
consider the case where $G_1, \ldots, G_m$ are induced subgraphs, and then shift our focus to the
general case. At the end, we will discuss the case where $F$ is bipartite.

\chapter{Induced Case}

In this section, we assume that $G_1, \ldots, G_m$ are induced subgraphs of $G$. Given graph $H$,
let $\mathcal{T}(H)$ be the graph with an additional vertex connecting to all vertices in $H$.

We first show a simpler case where $F$ is a triangle.

\section{Triangle $F$}

\begin{theorem}
  Suppose that $E(G_i) \cap E(G_j)$ does not include $K_3$ for distinct $i, j$. Then
  \[
    \sum_{i = 1}^n e(G_i) \leq n\left\lfloor\frac{n^2}{4}\right\rfloor,
  \]
  with equality if and only if $G_1 = G_2 = \cdots = G_n = K_{\left\lceil\frac{n}{2}\right\rceil,
  \left\lfloor\frac{n}{2}\right\rfloor}$.
\end{theorem}

\begin{lemma}
  Suppose $E(G_1) \cap E(G_2)$ does not include $K_3$. Then
  \[
    e(G_1) + e(G_2) \leq 2\left\lfloor\frac{n^2}{4}\right\rfloor,
  \]
  with equality if and only if $G_1 = G_2 = K_{\left\lceil\frac{n}{2}\right\rceil,
  \left\lfloor\frac{n}{2}\right\rfloor}$, unless $n$ is odd and $G_1 = K_{\left\lceil\frac{n -
  1}{2}\right\rceil, \left\lfloor\frac{n - 1}{2}\right\rfloor}$ and $G_2 =
  \mathcal{T}(K_{\left\lceil\frac{n - 1}{2}\right\rceil, \left\lfloor\frac{n -
  1}{2}\right\rfloor})$.
\end{lemma}

\begin{proof}
  Let $C = V(G_1) \cap V(G_2)$, the set of vertices in both $G_1$ and $G_2$. Let $A = V(G_1)
  \backslash C$, and let $B = V(G_2) \backslash C$. For simplicity, put $a = |A|$, $b = |B|$, and $c
  = |C|$. We may assume that $a + b + c = n$.

  We now find an upper bound of $e(G_1) + e(G_2)$ with respect to $a, b, c$. Since $G_1, G_2$ are
  induced graphs, we have $\{u, v\} \in E(G_1)$ if and only if $\{u, v\} \in E(G_2)$, for $u, v \in
  C$. This implies the subgraph of $G_1$ induced by $C$ is identical to the subgraph of $G_2$
  induced by $C$. In other words, $E(G_1[C]) = E(G_2[C]) = E(G_i) \cap E(G_j)$, which is
  triangle-free. By Mantel's Theorem, $e(G_1[C]) \leq \left\lfloor\frac{c^2}{4}\right\rfloor$, with
  equality if and only if $G_1[C] = K_{\left\lceil\frac{c}{2}\right\rceil,
  \left\lfloor\frac{c}{2}\right\rfloor}$. Hence, we may write
  \begin{align}
    e(G_1) + e(G_2) 
    &\leq \binom{|V(G_1)|}{2} + \binom{|V(G_2)|}{2} - 2\left[\binom{c}{2} - \left\lfloor\frac{c^2}{4}\right\rfloor\right] \nonumber \\
    &= \binom{a + c}{2} + \binom{b + c}{2} - 2\left[\binom{c}{2} - \left\lfloor\frac{c^2}{4}\right\rfloor\right].
  \end{align}
  Define $f(a, b, c)$ as the function on the right-hand-side of (1). We show that $f(a, b, c)$
  attains its maximum at $a = b = 0$ and $c = n$. Note that
  \begin{align*}
    f(a, b - 2, c + 2) - f(a, b, c)
    &= \binom{a + c + 2}{2} - \binom{a + c}{2} \\
    &\qquad - 2\left[\binom{c + 2}{2} - \binom{c}{2} - \left\lfloor\frac{(c + 2)^2}{4}\right\rfloor + \left\lfloor\frac{c^2}{4}\right\rfloor\right] \\
    &= 2(a + c) + 1 - 2[2c + 1 - (c + 1)] \\
    &= 2a + 1 > 0.
  \end{align*}
  By symmetry, $f(a - 2, b, c + 2) > f(a, b, c)$, and thus $f$ attains its maximum when $c$ is $n -
  1$ or $n$, that is, $a + b \leq 1$. Equation (1) now yields, 
  \[
    e(G_1) + e(G_2) \leq f(a, b, c) \leq 2\left\lfloor\frac{n^2}{4}\right\rfloor.
  \]
  Assume that $a = 0$. When $c = n$, the equality holds only if $G_1 = G_2 =
  K_{\left\lceil\frac{n}{2}\right\rceil, \left\lfloor\frac{n}{2}\right\rfloor}$. If $c = n - 1$,
  then the equality holds only if $n$ is odd and $G_1 = G[C] = K_{\left\lceil\frac{n -
  1}{2}\right\rceil, \left\lfloor\frac{n - 1}{2}\right\rfloor}$ and $G_2$ is $G_1$ with all vertices
  connected with the only remaining vertex, that is, $G_2 = \mathcal{T}(K_{\left\lceil\frac{n -
  1}{2}\right\rceil, \left\lfloor\frac{n - 1}{2}\right\rfloor})$.
\end{proof}

We now prove Theorem 2.1.

\begin{proof}[Proof of Theorem 2.1]
  We may assume that $n > 1$. Put $G_{n + i} = G_i$. By Lemma 3.2,
  \[
    \sum_{i = 1}^n e(G_i) = \frac{1}{2}\sum_{i = 1}^n (e(G_i) + e(G_{i + 1})) \leq \frac{1}{2}\sum_{i = 1}^n 2\left\lfloor\frac{n^2}{4}\right\rfloor = n\left\lfloor\frac{n^2}{4}\right\rfloor.
  \]
  Suppose the equality holds. By Lemma 3.2, we are done if $n$ is even. Suppose $n$ is odd and $G_i
   = \mathcal{T}(K_{\left\lceil\frac{n - 1}{2}\right\rceil, \left\lfloor\frac{n -
   1}{2}\right\rfloor})$ for some $i$. By Lemma 3.2, one of $G_i$ and $G_{i + 1}$ is
   $K_{\left\lceil\frac{n - 1}{2}\right\rceil, \left\lfloor\frac{n - 1}{2}\right\rfloor}$ and the
   other is $\mathcal{T}(K_{\left\lceil\frac{n - 1}{2}\right\rceil, \left\lfloor\frac{n -
   1}{2}\right\rfloor})$, for all $i$. Hence,
   \[
    G_{i + 1} = K_{\left\lceil\frac{n - 1}{2}\right\rceil, \left\lfloor\frac{n - 1}{2}\right\rfloor}, G_{i + 2} = \mathcal{T}(K_{\left\lceil\frac{n - 1}{2}\right\rceil, \left\lfloor\frac{n - 1}{2}\right\rfloor}), \ldots
   \]
   and the alternation proceeds. But then $G_{n + i} = G_i =
   K_{\left\lceil\frac{n - 1}{2}\right\rceil, \left\lfloor\frac{n - 1}{2}\right\rfloor}$ as $n$ is
   odd, and this contradiction completes the proof.
\end{proof}

\section{Non-bipartite $F$}

\begin{theorem}
  Let $F$ be $(r + 1)$-colorable, with $r \geq 2$. Suppose that $E(G_i) \cap E(G_j)$ is $F$-free for
  distinct $i, j$. For large enough $n$,
  \[
    \sum_{i = 1}^n e(G_i) \leq n \cdot \textnormal{ex}(n, F),
  \]
  with equality if and only if $G_1 = G_2 = \cdots = G_n$ are $n$-vertex extremal graphs for $F$.
\end{theorem}

By the same argument as in Theorem 2.1, it suffices to prove the following lemma:

\begin{lemma}
  Let $F$ be $(r + 1)$-colorable, with $r \geq 2$. Suppose $E(G_1) \cap E(G_2)$ does not include
  $F$. For large enough $n$,
  \[
    e(G_1) + e(G_2) \leq 2 \cdot \textnormal{ex}(n, F),
  \]
  with equality if and only if $G_1 = G_2$ are $n$-vertex extremal graphs for $F$, unless $n$ is
  odd, $G_1$ is an $(n - 1)$-vertex extremal graph for $F$, and $G_2 = \mathcal{T}(G_1)$. 
\end{lemma}

\begin{proof}
	\textcolor{red}{TODO: fix this proof.}
  Let $C = V(G_1) \cap V(G_2)$, the set of vertices in both $G_1$ and $G_2$. Let $A = V(G_1)
  \backslash C$, and let $B = V(G_2) \backslash C$. For simplicity, put $a = |A|$, $b = |B|$, $c =
  |C|$, and $r = \chi(F)$.

  We now find an upper bound of $e(G_1) + e(G_2)$ with respect to $a, b, c$. Since $G_1, G_2$ are
  induced graphs, we have $E(G_1[C]) = E(G_2[C]) = E(G[C]) = E(G_i) \cap E(G_j)$, which is $F$-free.
  Hence, we may write
  \begin{gather}
    e(G_1) + e(G_2) \leq \binom{a + c}{2} +  \binom{b + c}{2} - 2\left[\binom{c}{2} - \textnormal{ex}(c, F)\right].
  \end{gather}
  Define $f(a, b, c)$ as the function on the right-hand-side. We show that $f(a, b, c)$ attains its
  maximum at $a = b = 0$ and $c = n$. By a theorem of Simonovits, for large enough $c$,
  $\text{ex}(c, F) = \text{ex}(c, K_{r + 1}) + \text{ex}(c, \tilde{F})$, where $\tilde{F}$ is the
  family of residue subgraphs of $F$ after $F$ is embedded into $T_r(c)$. Hence, we may write
  \begin{align*}
    f(a, b - 2, c + 2) - f(a, b, c)
    &= \binom{a + c + 2}{2} - \binom{a + c}{2} \\
    &\;\; - 2\left[\binom{c + 2}{2} - \binom{c}{2} - \textnormal{ex}(c + 2, F) + \textnormal{ex}(c, F)\right] \\
    &\geq 2a - 2c - 1 + 2[\textnormal{ex}(c + 2, K_{r + 1}) - \textnormal{ex}(c, K_{r + 1})] > 0,
  \end{align*}
  as shown in the proof of Lemma 3.4. By symmetry, we also have $f(a - 2, b, c + 2) > f(a, b, c)$.
  Thus, $f$ attains its maximum when $c$ is $n - 1$ or $n$. Equation (5) now yields, 
  \begin{align*}
    e(G_1) + e(G_2) \leq \max\left[2 \cdot \textnormal{ex}(n, F), 2 \cdot \textnormal{ex}(n - 1, F) + n - 1\right].
  \end{align*}
  Assume that $a = 0$. Since
  \begin{align}
    2 \cdot \textnormal{ex}(n, F) - [2 \cdot \textnormal{ex}(n - 1, F) + n - 1]
    &\geq 2[\textnormal{ex}(n, K_{r + 1}) - \textnormal{ex}(n - 1, K_{r + 1})] \\
    &\qquad\qquad\qquad\qquad - n + 1 \\
    &= 2\left(n - \left\lceil \frac{n}{r} \right\rceil\right) - n + 1 \\
    &\geq n + 1 - 2\left\lceil \frac{n}{2} \right\rceil \geq 0, \nonumber
  \end{align}
  we have
  \begin{gather}
    e(G_1) + e(G_2) \leq 2 \cdot \textnormal{ex}(n, F).
  \end{gather}
  If $c = n$, the equality for (9) holds only if $G_1 = G_2$ are $n$-vertex extramal graphs for $F$.
  Suppose $c = n - 1$ and the equality holds. Observe that equation (6) is equal to zero only when
  $r = 2$ and $n$ is odd. Hence, if $c = n - 1$, the equality for (9) could only be achieved when $r
  = 2$, $n$ is odd, $G_1$ is an $(n - 1)$-vertex extremal graph for $F$, and $G_2 =
  \mathcal{T}(G_1)$.
\end{proof}

\chapter{General Case}

We now relax the assumption that $G_1, \dots, G_m$ are induced subgraphs. The trivial construction
of putting $G_1 = K_n$ and $G_2, \ldots, G_m$ to be extremal graphs for $F$ yields the lower bound
\begin{gather}
	\sum_{i = 1}^m e(G_i) = \binom{n}{2} + (m - 1)\text{ex}(n, F).
\end{gather}
In this section we examine whether this bound is tight. The following is an asymptotic result on the
number of $G_i$'s:

\begin{theorem}
	Suppose that $E(G_i) \cap E(G_j)$ does not include $r$-vertex graph $F$ for distinct $i, j$. Then
	for large enough $n$,
	\[
		\sum_{i = 1}^m e(G_i) \leq m(1 + o(1))\textnormal{ex}(n, F),
	\]
	as $m \to \infty$.
\end{theorem}

\begin{proof}
  Pick $\epsilon > 0$. Reorder $G_1, \ldots, G_m$ such that $G_1, \ldots, G_{m'}$ are all the
  $G_i$'s containing at least $(1 + \epsilon)\text{ex}(n, F)$ edges. A theorem of Simonovits states
  that $G$ contains at least $\delta n^r$ copies of $F$ for some $\delta = \delta(\epsilon)$. Since
  there can be at most $\binom{n}{r}$ copies of $F$ across all $G_i$'s, we have 
  \[
    m'\delta n^{r} \leq \binom{n}{r} \leq n^r \implies m' \leq \frac{1}{\delta}.
  \]
  It now follows that
  \begin{align*}
    \sum_{i = 1}^m e(G_i) 
    &= \sum_{i = 1}^{m'} e(G_i) + \sum_{i = m' + 1}^m e(G_i) \\
    &\leq \frac{1}{\delta}\binom{n}{2} + \left(m - \frac{1}{\delta}\right)(1 + \epsilon)\text{ex}(n, F) \\
    &= m\left[1 + \epsilon + \frac{1}{m\delta}\left(\frac{\binom{n}{2}}{\textnormal{ex}(n, F)} - (1 + \epsilon)\right)\right]\textnormal{ex}(n, F).
  \end{align*}
  Since $\epsilon$ is arbitrary, the result follows.
\end{proof}


\section{Triangle $F$}

Consider $F$ to be a triangle. Simply counting the number of triangles in each $G_i$ shows the
following:

\begin{theorem}
	For any $\epsilon > 0$, if $E(G_i) \cap E(G_j)$ does not include $K_3$ for distinct $i, j$, then
	\[
		\sum_{i = 1}^m  e(G_i) < m(1 + \epsilon)\frac{n^2}{4} + (1 - \epsilon)\frac{n^2}{2\epsilon}.
	\]
\end{theorem}

\begin{claim}
	There are less than $\frac{2}{\epsilon}$ number of $G_i$'s with $e(G_i) \geq (1 +
	\epsilon)\frac{n^2}{4}$.
\end{claim}

\begin{proof}
	Suppose $e(G_i) \geq (1 + \epsilon)\frac{n^2}{4}$ for $1\leq i \leq k$. Let $K_3(G)$ denote the
	number of triangles in graph $G$. By the Moon-Moser inequality,
	\[
		K_3(G_i) \geq \epsilon(1 + \epsilon)\frac{n^3}{12}.
	\]
	Since there are no overlapping traingles from different $G_i$'s, 
	\[
		\binom{n}{3} \geq \sum_{i = 1}^k K_3(G_i) \geq \frac{\epsilon(1 + \epsilon)}{12}kn^3.
	\]
	Rearranging yields $k < \frac{2}{\epsilon}$.
\end{proof}

By the claim, 
\[
  \sum_{i = 1}^m e(G_i) < \frac{2}{\epsilon}\binom{n}{2} + \left(m - \frac{2}{\epsilon}\right)(1 + \epsilon)\frac{n^2}{4} \leq m(1 + \epsilon)\frac{n^2}{4} + (1 - \epsilon)\frac{n^2}{2\epsilon},
\]
which proves Theorem 3.2.

It can be easily shown that the bound in Theorem 3.2 is tight when $m = 2$, as
\[
	e(G_1) + e(G_2) \leq \binom{n}{2} + e(G_{1, 2}) \leq \binom{n}{2} + \left\lfloor \frac{n^2}{4} \right\rfloor.
\]
This result is also true for $m = 3$:

\begin{proposition}
	Let $G_1, G_2, G_3$ be subgraphs of some $G$ such that no triangle is contained in any two graphs,
	then
	\[
		e(G_1) + e(G_2) + e(G_3) \leq \binom{n}{2} + \frac{n^2}{2}.
	\]
\end{proposition}

\begin{proof}
  Define $H_k \subseteq G$ be the graph with edges contained in at least $k$ number of $G_i$'s and
  note that $e(G_1) + e(G_2) + e(G_3) = e(H_1) + e(H_2) + e(H_3)$. Thus it suffices to show that
  $e(H_2) + e(H_3) \leq \frac{n^2}{2}$. Notice $H_2$ must not contain any triangles with two edges
  in $H_3$, so
  \[
    e(H_2) + e(H_3) \leq \binom{n}{2} + e(H_3) - |\{\{u, v\} : u \neq v, N_{H_3}(u) \cap N_{H_3}(v) \neq \emptyset\}|.
  \]
  Let $H'_3$ be the graph with the same vertex set as $H_3$ and edge set $\{\{u, v\} : u \neq v,
  N_{H_3}(u) \cap N_{H_3}(v) \neq \emptyset\}$. It suffices to show that $\frac{n}{2} \geq e(H_3) -
  e(H'_3)$. 

  Let $d_1 \geq d_2 \geq \cdots \geq d_n$ and $f_1 \geq f_2 \geq \cdots \geq f_n$ each be the degree
  sequence of $H_3$ and $H_3'$, respectively. We show that $f_i \geq d_i - 1$ for all $i$. Let $v_i$
  denote the vertex in $H$ with degree $d_i$ and $u_i$ be the vertex in $H$ with degree $f_i$. Let
  $S_i = |N_{H_3}(v_1) \cup \cdots \cup N_{H_3}(v_i)|$. Since 
  \[
    \sum_{u \in S_i} d_{H_3}(u) \geq d_1 + \cdots + d_i,
  \]
  we have that $|S_i| \geq i$. But then $S_i \backslash \{u_1, \ldots, u_{i - 1}\}$ is non-empty,
  and every $u \in S_i$ has degree $d_{H_3'}(u) \geq d_i - 1$. Hence, $f_i \geq d_i - 1$ for all
  $i$, which yields
  \[
    e(H_3') = \frac{1}{2}\sum_{i = 1}^n f_i \geq \frac{1}{2}\sum_{i = 1}^n (d_i - 1) = e(H_3) - \frac{n}{2}.
  \]
\end{proof}

However, the bound in Proposition 3.1 is not tight for $m \geq 4$, as shown in the following graph:

\begin{center}
  \begin{tikzpicture}
    \draw (4, 2) to node[midway, above] {$123$} (-4, 2);
    \draw (-4, 2) to node[midway, left] {$124$} (-1, -1);
    \draw (-1, -1) to node[midway, above] {$34$} (1, -1);
    \draw (1, -1) to node[midway, right] {$124$} (4, 2);
    \draw (0, 1) to node[midway, below] {$234$} (4, 2);
    \draw (0, 1) to node[midway, below] {$134$} (-4, 2);
    \draw (0, 1) to node[midway, left] {$123$} (-1, -1);
    \draw (0, 1) to node[midway, right] {$123$} (1, -1);
    \draw[bend left=80] (4, 2) to node[midway, right] {$134$} (-1, -1);
    \draw[bend right=80] (-4, 2) to node[midway, left] {$234$} (1, -1);

    \foreach \x/\y in {0/1, 4/2, 1/-1, -1/-1, -4/2} {
        \fill (\x, \y) circle (2pt);
    }
  \end{tikzpicture}
  \\
  \small{The number on each edge denotes the set of $G_i$'s that contain the edge.}
\end{center}
The above graph contains $29$ edges, which exceeds the bound $\binom{5}{2} + 3 \lfloor \frac{5^2}{4}
\rfloor = 28$ by $1$. By blowing up the above graph, we can construct a graph with $n \in
10\mathbb{Z}$ vertices that contains
\[
  5\binom{n/5}{2} + 29 \cdot \frac{(n/5)^2}{4}
\]
edges, which exceeds the bound $\binom{n}{2} + 3\lfloor\frac{n^2}{4}\rfloor$ by $\frac{n^2}{100}$. 

\section{Bipartite $F$}





\end{document}
